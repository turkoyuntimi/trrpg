/**
 * Efilli Core Library
 * Efilli Team | Halil Ã–ncen <halil@efilli.com>
 * Efilli (c) All Rights Reserved 2020-2022
 * https://efilli.com
 * 
 * NNNNNNNNNNNM$$VIIIIIIIIIIIFV$$MNNNNNNNNNNN
 * NNNNNNNNM$FIIV$$MMNNNNNNMM$$VIIF$MNNNNNNNN
 * NNNNNN$FIF$MNNNNNNNNNNNNNNNNNNM$FIF$NNNNNN
 * NNNN$FIVMNNNNNNNNNNNNNNNNNNNNNNNNMVIF$NNNN
 * NNMVIFMNNNNNNNM$$VFIIIIFV$$MNNNNNNNMFIVMNN
 * NMV*VMNNNNNNMVI************IV$NNNNNNM$*VMN
 * NV*$NNNNNNMV******************VMNNNNNN$*VN
 * $*VNNNNNN$I******************I$MNNNNNNNV*$
 * IIMNNNNNMI*****************I$MNNNNNNNNNMII
 * *FNNNNNNV****************I$MNNMMMMNNNNNNF*
 * *VNNNNNNV**************I$MN$II***VNNNNNNV*
 * *FNNNNNNV************F$NNNMF*****VNNNNNNF*
 * IIMNNNNNMI*********I$NNNNMF*****IMNNNNNMII
 * $*VNNNNNN$I*******I$$$$VF******I$NNNNNNV*$
 * MV*$NNNNNNMV******************VMNNNNNN$*VN
 * NMV*VMNNNNNNMVI************IVMNNNNNNMV*VMN
 * NNNVIMNVVMNNNNM$$VFIIIIFV$$MNNNNNNNMFIVMNN
 * NNNNNM*..:*VMNNNNNNNNNNNNNNNNNNNNMVIF$NNNN
 * NNNNM*.....*MNNNNNNNNNNNNNNNNNM$FIF$NNNNNN
 * NNNNN$F*::*IIV$$MMNNNNNNMM$$VIIF$MNNNNNNNN
 * NNNNNNNN$$NM$$VFIIIIIIIIIIFV$$MNNNNNNNNNNN
 */(()=>{var __webpack_modules__={293:(e,t,n)=>{"use strict";function i(e,t){const n=Object.create(null),i=e.split(",");for(let e=0;e<i.length;e++)n[i[e]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}n.d(t,{qj:()=>ge});Object.assign;const o=Object.prototype.hasOwnProperty,r=(e,t)=>o.call(e,t),s=Array.isArray,l=e=>"[object Map]"===_(e),a=e=>"string"==typeof e,c=e=>"symbol"==typeof e,u=e=>null!==e&&"object"==typeof e,d=Object.prototype.toString,_=e=>d.call(e),h=e=>a(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,f=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},p=/-(\w)/g,v=(f((e=>e.replace(p,((e,t)=>t?t.toUpperCase():"")))),/\B([A-Z])/g),g=(f((e=>e.replace(v,"-$1").toLowerCase())),f((e=>e.charAt(0).toUpperCase()+e.slice(1)))),y=(f((e=>e?`on${g(e)}`:"")),(e,t)=>!Object.is(e,t));const m=e=>{const t=new Set(e);return t.w=0,t.n=0,t},w=e=>(e.w&k)>0,b=e=>(e.n&k)>0,C=new WeakMap;let E=0,k=1;let L;const O=Symbol(""),S=Symbol("");let x=!0;const A=[];function P(){const e=A.pop();x=void 0===e||e}function R(e,t,n){if(!T())return;let i=C.get(e);i||C.set(e,i=new Map);let o=i.get(n);o||i.set(n,o=m());j(o,undefined)}function T(){return x&&void 0!==L}function j(e,t){let n=!1;E<=30?b(e)||(e.n|=k,n=!w(e)):n=!e.has(L),n&&(e.add(L),L.deps.push(e))}function M(e,t,n,i,o,r){const a=C.get(e);if(!a)return;let c=[];if("clear"===t)c=[...a.values()];else if("length"===n&&s(e))a.forEach(((e,t)=>{("length"===t||t>=i)&&c.push(e)}));else switch(void 0!==n&&c.push(a.get(n)),t){case"add":s(e)?h(n)&&c.push(a.get("length")):(c.push(a.get(O)),l(e)&&c.push(a.get(S)));break;case"delete":s(e)||(c.push(a.get(O)),l(e)&&c.push(a.get(S)));break;case"set":l(e)&&c.push(a.get(O))}if(1===c.length)c[0]&&I(c[0]);else{const e=[];for(const t of c)t&&e.push(...t);I(m(e))}}function I(e,t){for(const t of s(e)?e:[...e])(t!==L||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const B=i("__proto__,__v_isRef,__isVue"),D=new Set(Object.getOwnPropertyNames(Symbol).map((e=>Symbol[e])).filter(c)),q=W(),U=W(!0),N=F();function F(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=be(this);for(let e=0,t=this.length;e<t;e++)R(n,0,e+"");const i=n[t](...e);return-1===i||!1===i?n[t](...e.map(be)):i}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){A.push(x),x=!1;const n=be(this)[t].apply(this,e);return P(),n}})),e}function W(e=!1,t=!1){return function(n,i,o){if("__v_isReactive"===i)return!e;if("__v_isReadonly"===i)return e;if("__v_raw"===i&&o===(e?t?pe:fe:t?he:_e).get(n))return n;const l=s(n);if(!e&&l&&r(N,i))return Reflect.get(N,i,o);const a=Reflect.get(n,i,o);if(c(i)?D.has(i):B(i))return a;if(e||R(n,0,i),t)return a;if(ke(a)){return!l||!h(i)?a.value:a}return u(a)?e?ye(a):ge(a):a}}function K(e=!1){return function(t,n,i,o){let l=t[n];if(!e&&!we(i)&&(i=be(i),l=be(l),!s(t)&&ke(l)&&!ke(i)))return l.value=i,!0;const a=s(t)&&h(n)?Number(n)<t.length:r(t,n),c=Reflect.set(t,n,i,o);return t===be(o)&&(a?y(i,l)&&M(t,"set",n,i):M(t,"add",n,i)),c}}const G={get:q,set:K(),deleteProperty:function(e,t){const n=r(e,t),i=(e[t],Reflect.deleteProperty(e,t));return i&&n&&M(e,"delete",t,void 0),i},has:function(e,t){const n=Reflect.has(e,t);return c(t)&&D.has(t)||R(e,0,t),n},ownKeys:function(e){return R(e,0,s(e)?"length":O),Reflect.ownKeys(e)}},$={get:U,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},z=e=>e,J=e=>Reflect.getPrototypeOf(e);function V(e,t,n=!1,i=!1){const o=be(e=e.__v_raw),r=be(t);t!==r&&!n&&R(o,0,t),!n&&R(o,0,r);const{has:s}=J(o),l=i?z:n?Ee:Ce;return s.call(o,t)?l(e.get(t)):s.call(o,r)?l(e.get(r)):void(e!==o&&e.get(t))}function Q(e,t=!1){const n=this.__v_raw,i=be(n),o=be(e);return e!==o&&!t&&R(i,0,e),!t&&R(i,0,o),e===o?n.has(e):n.has(e)||n.has(o)}function Y(e,t=!1){return e=e.__v_raw,!t&&R(be(e),0,O),Reflect.get(e,"size",e)}function H(e){e=be(e);const t=be(this);return J(t).has.call(t,e)||(t.add(e),M(t,"add",e,e)),this}function X(e,t){t=be(t);const n=be(this),{has:i,get:o}=J(n);let r=i.call(n,e);r||(e=be(e),r=i.call(n,e));const s=o.call(n,e);return n.set(e,t),r?y(t,s)&&M(n,"set",e,t):M(n,"add",e,t),this}function Z(e){const t=be(this),{has:n,get:i}=J(t);let o=n.call(t,e);o||(e=be(e),o=n.call(t,e));i&&i.call(t,e);const r=t.delete(e);return o&&M(t,"delete",e,void 0),r}function ee(){const e=be(this),t=0!==e.size,n=e.clear();return t&&M(e,"clear",void 0,void 0),n}function te(e,t){return function(n,i){const o=this,r=o.__v_raw,s=be(r),l=t?z:e?Ee:Ce;return!e&&R(s,0,O),r.forEach(((e,t)=>n.call(i,l(e),l(t),o)))}}function ne(e,t,n){return function(...i){const o=this.__v_raw,r=be(o),s=l(r),a="entries"===e||e===Symbol.iterator&&s,c="keys"===e&&s,u=o[e](...i),d=n?z:t?Ee:Ce;return!t&&R(r,0,c?S:O),{next(){const{value:e,done:t}=u.next();return t?{value:e,done:t}:{value:a?[d(e[0]),d(e[1])]:d(e),done:t}},[Symbol.iterator](){return this}}}}function ie(e){return function(...t){return"delete"!==e&&this}}function oe(){const e={get(e){return V(this,e)},get size(){return Y(this)},has:Q,add:H,set:X,delete:Z,clear:ee,forEach:te(!1,!1)},t={get(e){return V(this,e,!1,!0)},get size(){return Y(this)},has:Q,add:H,set:X,delete:Z,clear:ee,forEach:te(!1,!0)},n={get(e){return V(this,e,!0)},get size(){return Y(this,!0)},has(e){return Q.call(this,e,!0)},add:ie("add"),set:ie("set"),delete:ie("delete"),clear:ie("clear"),forEach:te(!0,!1)},i={get(e){return V(this,e,!0,!0)},get size(){return Y(this,!0)},has(e){return Q.call(this,e,!0)},add:ie("add"),set:ie("set"),delete:ie("delete"),clear:ie("clear"),forEach:te(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((o=>{e[o]=ne(o,!1,!1),n[o]=ne(o,!0,!1),t[o]=ne(o,!1,!0),i[o]=ne(o,!0,!0)})),[e,n,t,i]}const[re,se,le,ae]=oe();function ce(e,t){const n=t?e?ae:le:e?se:re;return(t,i,o)=>"__v_isReactive"===i?!e:"__v_isReadonly"===i?e:"__v_raw"===i?t:Reflect.get(r(n,i)&&i in t?n:t,i,o)}const ue={get:ce(!1,!1)},de={get:ce(!0,!1)};const _e=new WeakMap,he=new WeakMap,fe=new WeakMap,pe=new WeakMap;function ve(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>_(e).slice(8,-1))(e))}function ge(e){return e&&e.__v_isReadonly?e:me(e,!1,G,ue,_e)}function ye(e){return me(e,!0,$,de,fe)}function me(e,t,n,i,o){if(!u(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const r=o.get(e);if(r)return r;const s=ve(e);if(0===s)return e;const l=new Proxy(e,2===s?i:n);return o.set(e,l),l}function we(e){return!(!e||!e.__v_isReadonly)}function be(e){const t=e&&e.__v_raw;return t?be(t):e}const Ce=e=>u(e)?ge(e):e,Ee=e=>u(e)?ye(e):e;function ke(e){return Boolean(e&&!0===e.__v_isRef)}Promise.resolve()},387:(e,t,n)=>{var i;!function(o){var r=Object.hasOwnProperty,s=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},l="object"==typeof process&&"function"==typeof process.nextTick,a="function"==typeof Symbol,c="object"==typeof Reflect,u="function"==typeof setImmediate?setImmediate:setTimeout,d=a?c&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function _(){this._events={},this._conf&&h.call(this,this._conf)}function h(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==o&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function f(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),"undefined"!=typeof process&&process.emitWarning){var i=new Error(n);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=e,process.emitWarning(i)}else console.error(n),console.trace&&console.trace()}var p=function(e,t,n){var i=arguments.length;switch(i){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var o=new Array(i);i--;)o[i]=arguments[i];return o}};function v(e,t){for(var n={},i=e.length,r=t?value.length:0,s=0;s<i;s++)n[e[s]]=s<r?t[s]:o;return n}function g(e,t,n){var i,o;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(i=n.on,o=n.off),t.addEventListener?(i=t.addEventListener,o=t.removeEventListener):t.addListener?(i=t.addListener,o=t.removeListener):t.on&&(i=t.on,o=t.off),!i&&!o)throw Error("target does not implement any known event API");if("function"!=typeof i)throw TypeError("on method must be a function");if("function"!=typeof o)throw TypeError("off method must be a function");this._on=i,this._off=o;var r=e._observers;r?r.push(this):e._observers=[this]}function y(e,t,n,i){var s=Object.assign({},t);if(!e)return s;if("object"!=typeof e)throw TypeError("options must be an object");var l,a,c,u=Object.keys(e),d=u.length;function _(e){throw Error('Invalid "'+l+'" option value'+(e?". Reason: "+e:""))}for(var h=0;h<d;h++){if(l=u[h],!i&&!r.call(t,l))throw Error('Unknown "'+l+'" option');(a=e[l])!==o&&(c=n[l],s[l]=c?c(a,_):a)}return s}function m(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function w(e){var t="value must be type of "+e.join("|"),n=e.length,i=e[0],o=e[1];return 1===n?function(e,n){if(typeof e===i)return e;n(t)}:2===n?function(e,n){var r=typeof e;if(r===i||r===o)return e;n(t)}:function(i,o){for(var r=typeof i,s=n;s-- >0;)if(r===e[s])return i;o(t)}}Object.assign(g.prototype,{subscribe:function(e,t,n){var i=this,o=this._target,r=this._emitter,s=this._listeners,l=function(){var i=p.apply(null,arguments),s={data:i,name:t,original:e};if(n){var l=n.call(o,s);!1!==l&&r.emit.apply(r,[s.name].concat(i))}else r.emit.apply(r,[t].concat(i))};if(s[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,r._newListener&&r._removeListener&&!i._onNewListener?(this._onNewListener=function(n){n===t&&null===s[e]&&(s[e]=l,i._on.call(o,e,l))},r.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===t&&!r.hasListeners(n)&&s[e]&&(s[e]=null,i._off.call(o,e,l))},s[e]=null,r.on("removeListener",this._onRemoveListener)):(s[e]=l,i._on.call(o,e,l))},unsubscribe:function(e){var t,n,i,o=this,r=this._listeners,s=this._emitter,l=this._off,a=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function c(){o._onNewListener&&(s.off("newListener",o._onNewListener),s.off("removeListener",o._onRemoveListener),o._onNewListener=null,o._onRemoveListener=null);var e=k.call(s,o);s._observers.splice(e,1)}if(e){if(!(t=r[e]))return;l.call(a,e,t),delete r[e],--this._listenersCount||c()}else{for(i=(n=d(r)).length;i-- >0;)e=n[i],l.call(a,e,r[e]);this._listeners={},this._listenersCount=0,c()}}});var b=w(["function"]),C=w(["object","function"]);function E(e,t,n){var i,o,r,s=0,l=new e((function(a,c,u){function d(){o&&(o=null),s&&(clearTimeout(s),s=0)}n=y(n,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}}),i=!n.overload&&"function"==typeof e.prototype.cancel&&"function"==typeof u;var _=function(e){d(),a(e)},h=function(e){d(),c(e)};i?t(_,h,u):(o=[function(e){h(e||Error("canceled"))}],t(_,h,(function(e){if(r)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");o.push(e)})),r=!0),n.timeout>0&&(s=setTimeout((function(){var e=Error("timeout");e.code="ETIMEDOUT",s=0,l.cancel(e),c(e)}),n.timeout))}));return i||(l.cancel=function(e){if(o){for(var t=o.length,n=1;n<t;n++)o[n](e);o[0](e),o=null}}),l}function k(e){var t=this._observers;if(!t)return-1;for(var n=t.length,i=0;i<n;i++)if(t[i]._target===e)return i;return-1}function L(e,t,n,i,o){if(!n)return null;if(0===i){var r=typeof t;if("string"===r){var s,l,a=0,c=0,u=this.delimiter,_=u.length;if(-1!==(l=t.indexOf(u))){s=new Array(5);do{s[a++]=t.slice(c,l),c=l+_}while(-1!==(l=t.indexOf(u,c)));s[a++]=t.slice(c),t=s,o=a}else t=[t],o=1}else"object"===r?o=t.length:(t=[t],o=1)}var h,f,p,v,g,y,m,w=null,b=t[i],C=t[i+1];if(i===o)n._listeners&&("function"==typeof n._listeners?(e&&e.push(n._listeners),w=[n]):(e&&e.push.apply(e,n._listeners),w=[n]));else{if("*"===b){for(l=(y=d(n)).length;l-- >0;)"_listeners"!==(h=y[l])&&(m=L(e,t,n[h],i+1,o))&&(w?w.push.apply(w,m):w=m);return w}if("**"===b){for((g=i+1===o||i+2===o&&"*"===C)&&n._listeners&&(w=L(e,t,n,o,o)),l=(y=d(n)).length;l-- >0;)"_listeners"!==(h=y[l])&&("*"===h||"**"===h?(n[h]._listeners&&!g&&(m=L(e,t,n[h],o,o))&&(w?w.push.apply(w,m):w=m),m=L(e,t,n[h],i,o)):m=L(e,t,n[h],h===C?i+2:i,o),m&&(w?w.push.apply(w,m):w=m));return w}n[b]&&(w=L(e,t,n[b],i+1,o))}if((f=n["*"])&&L(e,t,f,i+1,o),p=n["**"])if(i<o)for(p._listeners&&L(e,t,p,o,o),l=(y=d(p)).length;l-- >0;)"_listeners"!==(h=y[l])&&(h===C?L(e,t,p[h],i+2,o):h===b?L(e,t,p[h],i+1,o):((v={})[h]=p[h],L(e,t,{"**":v},i+1,o)));else p._listeners?L(e,t,p,o,o):p["*"]&&p["*"]._listeners&&L(e,t,p["*"],o,o);return w}function O(e,t,n){var i,o,r=0,s=0,l=this.delimiter,a=l.length;if("string"==typeof e)if(-1!==(i=e.indexOf(l))){o=new Array(5);do{o[r++]=e.slice(s,i),s=i+a}while(-1!==(i=e.indexOf(l,s)));o[r++]=e.slice(s)}else o=[e],r=1;else o=e,r=e.length;if(r>1)for(i=0;i+1<r;i++)if("**"===o[i]&&"**"===o[i+1])return;var c,u=this.listenerTree;for(i=0;i<r;i++)if(u=u[c=o[i]]||(u[c]={}),i===r-1)return u._listeners?("function"==typeof u._listeners&&(u._listeners=[u._listeners]),n?u._listeners.unshift(t):u._listeners.push(t),!u._listeners.warned&&this._maxListeners>0&&u._listeners.length>this._maxListeners&&(u._listeners.warned=!0,f.call(this,u._listeners.length,c))):u._listeners=t,!0;return!0}function S(e,t,n,i){for(var o,r,s,l,a=d(e),c=a.length,u=e._listeners;c-- >0;)o=e[r=a[c]],s="_listeners"===r?n:n?n.concat(r):[r],l=i||"symbol"==typeof r,u&&t.push(l?s:s.join(this.delimiter)),"object"==typeof o&&S.call(this,o,t,s,l);return t}function x(e){for(var t,n,i,o=d(e),r=o.length;r-- >0;)(t=e[n=o[r]])&&(i=!0,"_listeners"===n||x(t)||delete e[n]);return i}function A(e,t,n){this.emitter=e,this.event=t,this.listener=n}function P(e,t,n){if(!0===n)r=!0;else if(!1===n)i=!0;else{if(!n||"object"!=typeof n)throw TypeError("options should be an object or true");var i=n.async,r=n.promisify,s=n.nextTick,a=n.objectify}if(i||s||r){var c=t,d=t._origin||t;if(s&&!l)throw Error("process.nextTick is not supported");r===o&&(r="AsyncFunction"===t.constructor.name),t=function(){var e=arguments,t=this,n=this.event;return r?s?Promise.resolve():new Promise((function(e){u(e)})).then((function(){return t.event=n,c.apply(t,e)})):(s?process.nextTick:u)((function(){t.event=n,c.apply(t,e)}))},t._async=!0,t._origin=d}return[t,a?new A(this,e,t):this]}function R(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,h.call(this,e)}A.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},R.EventEmitter2=R,R.prototype.listenTo=function(e,t,n){if("object"!=typeof e)throw TypeError("target musts be an object");var i=this;function r(t){if("object"!=typeof t)throw TypeError("events must be an object");var o,r=n.reducers,s=k.call(i,e);o=-1===s?new g(i,e,n):i._observers[s];for(var l,a=d(t),c=a.length,u="function"==typeof r,_=0;_<c;_++)l=a[_],o.subscribe(l,t[l]||l,u?r:r&&r[l])}return n=y(n,{on:o,off:o,reducers:o},{on:b,off:b,reducers:C}),s(t)?r(v(t)):r("string"==typeof t?v(t.split(/\s+/)):t),this},R.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var i,o=n.length,r=!1;if(e&&"object"!=typeof e)throw TypeError("target should be an object");for(;o-- >0;)i=n[o],e&&i._target!==e||(i.unsubscribe(t),r=!0);return r},R.prototype.delimiter=".",R.prototype.setMaxListeners=function(e){e!==o&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},R.prototype.getMaxListeners=function(){return this._maxListeners},R.prototype.event="",R.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},R.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},R.prototype._once=function(e,t,n,i){return this._many(e,1,t,n,i)},R.prototype.many=function(e,t,n,i){return this._many(e,t,n,!1,i)},R.prototype.prependMany=function(e,t,n,i){return this._many(e,t,n,!0,i)},R.prototype._many=function(e,t,n,i,o){var r=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function s(){return 0==--t&&r.off(e,s),n.apply(this,arguments)}return s._origin=n,this._on(e,s,i,o)},R.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||_.call(this);var e,t,n,i,o,r,s=arguments[0],l=this.wildcard;if("newListener"===s&&!this._newListener&&!this._events.newListener)return!1;if(l&&(e=s,"newListener"!==s&&"removeListener"!==s&&"object"==typeof s)){if(n=s.length,a)for(i=0;i<n;i++)if("symbol"==typeof s[i]){r=!0;break}r||(s=s.join(this.delimiter))}var c,u=arguments.length;if(this._all&&this._all.length)for(i=0,n=(c=this._all.slice()).length;i<n;i++)switch(this.event=s,u){case 1:c[i].call(this,s);break;case 2:c[i].call(this,s,arguments[1]);break;case 3:c[i].call(this,s,arguments[1],arguments[2]);break;default:c[i].apply(this,arguments)}if(l)c=[],L.call(this,c,e,this.listenerTree,0,n);else{if("function"==typeof(c=this._events[s])){switch(this.event=s,u){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(u-1),o=1;o<u;o++)t[o-1]=arguments[o];c.apply(this,t)}return!0}c&&(c=c.slice())}if(c&&c.length){if(u>3)for(t=new Array(u-1),o=1;o<u;o++)t[o-1]=arguments[o];for(i=0,n=c.length;i<n;i++)switch(this.event=s,u){case 1:c[i].call(this);break;case 2:c[i].call(this,arguments[1]);break;case 3:c[i].call(this,arguments[1],arguments[2]);break;default:c[i].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===s)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},R.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||_.call(this);var e,t,n,i,o,r,s=arguments[0],l=this.wildcard;if("newListener"===s&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(l&&(e=s,"newListener"!==s&&"removeListener"!==s&&"object"==typeof s)){if(i=s.length,a)for(o=0;o<i;o++)if("symbol"==typeof s[o]){t=!0;break}t||(s=s.join(this.delimiter))}var c,u=[],d=arguments.length;if(this._all)for(o=0,i=this._all.length;o<i;o++)switch(this.event=s,d){case 1:u.push(this._all[o].call(this,s));break;case 2:u.push(this._all[o].call(this,s,arguments[1]));break;case 3:u.push(this._all[o].call(this,s,arguments[1],arguments[2]));break;default:u.push(this._all[o].apply(this,arguments))}if(l?(c=[],L.call(this,c,e,this.listenerTree,0)):c=this._events[s],"function"==typeof c)switch(this.event=s,d){case 1:u.push(c.call(this));break;case 2:u.push(c.call(this,arguments[1]));break;case 3:u.push(c.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(d-1),r=1;r<d;r++)n[r-1]=arguments[r];u.push(c.apply(this,n))}else if(c&&c.length){if(c=c.slice(),d>3)for(n=new Array(d-1),r=1;r<d;r++)n[r-1]=arguments[r];for(o=0,i=c.length;o<i;o++)switch(this.event=s,d){case 1:u.push(c[o].call(this));break;case 2:u.push(c[o].call(this,arguments[1]));break;case 3:u.push(c[o].call(this,arguments[1],arguments[2]));break;default:u.push(c[o].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===s)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(u)},R.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},R.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},R.prototype.onAny=function(e){return this._onAny(e,!1)},R.prototype.prependAny=function(e){return this._onAny(e,!0)},R.prototype.addListener=R.prototype.on,R.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},R.prototype._on=function(e,t,n,i){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");this._events||_.call(this);var r,s=this;return i!==o&&(t=(r=P.call(this,e,t,i))[0],s=r[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(O.call(this,e,t,n),s):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,f.call(this,this._events[e].length,e))):this._events[e]=t,s)},R.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,i=[];if(this.wildcard){var o="string"==typeof e?e.split(this.delimiter):e.slice();if(!(i=L.call(this,null,o,this.listenerTree,0)))return this}else{if(!this._events[e])return this;n=this._events[e],i.push({_listeners:n})}for(var r=0;r<i.length;r++){var l=i[r];if(n=l._listeners,s(n)){for(var a=-1,c=0,u=n.length;c<u;c++)if(n[c]===t||n[c].listener&&n[c].listener===t||n[c]._origin&&n[c]._origin===t){a=c;break}if(a<0)continue;return this.wildcard?l._listeners.splice(a,1):this._events[e].splice(a,1),0===n.length&&(this.wildcard?delete l._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete l._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&x(this.listenerTree),this},R.prototype.offAny=function(e){var t,n=0,i=0;if(e&&this._all&&this._all.length>0){for(n=0,i=(t=this._all).length;n<i;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,i=t.length;n<i;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},R.prototype.removeListener=R.prototype.off,R.prototype.removeAllListeners=function(e){if(e===o)return!this._events||_.call(this),this;if(this.wildcard){var t,n=L.call(this,null,e,this.listenerTree,0);if(!n)return this;for(t=0;t<n.length;t++)n[t]._listeners=null;this.listenerTree&&x(this.listenerTree)}else this._events&&(this._events[e]=null);return this},R.prototype.listeners=function(e){var t,n,i,r,s,l=this._events;if(e===o){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!l)return[];for(r=(t=d(l)).length,i=[];r-- >0;)"function"==typeof(n=l[t[r]])?i.push(n):i.push.apply(i,n);return i}if(this.wildcard){if(!(s=this.listenerTree))return[];var a=[],c="string"==typeof e?e.split(this.delimiter):e.slice();return L.call(this,a,c,s,0),a}return l&&(n=l[e])?"function"==typeof n?[n]:n:[]},R.prototype.eventNames=function(e){var t=this._events;return this.wildcard?S.call(this,this.listenerTree,[],null,e):t?d(t):[]},R.prototype.listenerCount=function(e){return this.listeners(e).length},R.prototype.hasListeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return L.call(this,t,n,this.listenerTree,0),t.length>0}var i=this._events,r=this._all;return!!(r&&r.length||i&&(e===o?d(i).length:i[e]))},R.prototype.listenersAny=function(){return this._all?this._all:[]},R.prototype.waitFor=function(e,t){var n=this,i=typeof t;return"number"===i?t={timeout:t}:"function"===i&&(t={filter:t}),E((t=y(t,{timeout:0,filter:o,handleError:!1,Promise,overload:!1},{filter:b,Promise:m})).Promise,(function(i,o,r){function s(){var r=t.filter;if(!r||r.apply(n,arguments))if(n.off(e,s),t.handleError){var l=arguments[0];l?o(l):i(p.apply(null,arguments).slice(1))}else i(p.apply(null,arguments))}r((function(){n.off(e,s)})),n._on(e,s,!1)}),{timeout:t.timeout,overload:t.overload})};var T=R.prototype;Object.defineProperties(R,{defaultMaxListeners:{get:function(){return T._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");T._maxListeners=e},enumerable:!0},once:{value:function(e,t,n){return E((n=y(n,{Promise,timeout:0,overload:!1},{Promise:m})).Promise,(function(n,i,o){var r;if("function"==typeof e.addEventListener)return r=function(){n(p.apply(null,arguments))},o((function(){e.removeEventListener(t,r)})),void e.addEventListener(t,r,{once:!0});var s,l=function(){s&&e.removeListener("error",s),n(p.apply(null,arguments))};"error"!==t&&(s=function(n){e.removeListener(t,l),i(n)},e.once("error",s)),o((function(){s&&e.removeListener("error",s),e.removeListener(t,l)})),e.once(t,l)}),{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(T,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),(i=function(){return R}.call(t,n,t,e))===o||(e.exports=i)}()},677:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});class i{constructor(e,t){this.backupScripts=[],this.logger=e,this.savedConsent=t,this.mutationObserver=new MutationObserver(this.onMutation.bind(this))}onMutation(e){const t=this.getScriptElements(e);for(const e of t){this.shouldItBeBlocked(e)&&this.blockScript(e)}}patchCreateElement(){const e=document.createElement.bind(document);document.createElement=(...t)=>{var n;if(!("script"===(null===(n=t[0])||void 0===n?void 0:n.toLowerCase())))return e(...t);const i=e(...t),o=i.setAttribute.bind(i);return Object.defineProperties(i,{"data-efl-categories":{get:()=>i.getAttribute("data-efl-categories"),set:e=>{this.logger.debug("[Cookie Blocker] Script data-efl-categories set =>",e),o("data-efl-categories",e);this.shouldItBeBlocked(i)&&o("type","javascript/blocked")}},"data-efl-cookies":{get:()=>i.getAttribute("data-efl-cookies"),set:e=>{o("data-efl-cookies",e);this.shouldItBeBlocked(i)&&o("type","javascript/blocked")}},type:{get:()=>i.getAttribute("type"),set:e=>{o("type",e);this.shouldItBeBlocked(i)&&o("type","javascript/blocked")}},src:{get:()=>i.getAttribute("src"),set:e=>{o("src",e);this.shouldItBeBlocked(i)&&o("type","javascript/blocked")}}}),i.setAttribute=(e,t)=>{["data-efl-categories","data-efl-cookies","type","src"].includes(e)?i[e]=t:o(e,t)},i}}getScriptElements(e){const t=[];return e.forEach((e=>{e.addedNodes.forEach((e=>{var n,i;1===(null==e?void 0:e.nodeType)&&"SCRIPT"===(null==e?void 0:e.tagName)&&((null===(n=null==e?void 0:e.dataset)||void 0===n?void 0:n.eflCookies)||(null===(i=null==e?void 0:e.dataset)||void 0===i?void 0:i.eflCategories))&&t.push(e)}))})),t}getScriptCookies(e){var t,n,i,o,r;return(null===(r=null===(o=null===(i=null===(n=null===(t=e.dataset)||void 0===t?void 0:t.eflCookies)||void 0===n?void 0:n.split)||void 0===i?void 0:i.call(n,","))||void 0===o?void 0:o.map)||void 0===r?void 0:r.call(o,(e=>null==e?void 0:e.trim())))||[]}getScriptCategories(e){var t,n,i,o,r;return(null===(r=null===(o=null===(i=null===(n=null===(t=e.dataset)||void 0===t?void 0:t.eflCategories)||void 0===n?void 0:n.split)||void 0===i?void 0:i.call(n,","))||void 0===o?void 0:o.map)||void 0===r?void 0:r.call(o,(e=>null==e?void 0:e.trim())))||[]}hasConsentForCookies(e){var t;const n=(null===(t=this.savedConsent)||void 0===t?void 0:t.cookies)||[];return e.every((e=>{var t;return null===(t=n.find((t=>t.name==e)))||void 0===t?void 0:t.status}))}hasConsentForCategories(e){var t;const n=(null===(t=this.savedConsent)||void 0===t?void 0:t.cookies)||[];return e.every((e=>{var t;return null===(t=n.find((t=>t.category==e)))||void 0===t?void 0:t.status}))}shouldItBeBlocked(e){const t=this.getScriptCookies(e),n=this.getScriptCategories(e),i=this.hasConsentForCookies(t),o=this.hasConsentForCategories(n);return this.logger.debug("sholdItBeBlocked",{script:e,scriptCookies:t,hasConsentForCookies:i,scriptCategories:n,hasConsentForCategories:o}),!i||!o||(this.logger.debug("[Cookie Blocker] Granted script => cookies: "+t.toString(),e),this.logger.debug("[Cookie Blocker] Granted script => categories : "+n.toString(),e),!1)}blockScript(e){var t;e.setAttribute("type","javascript/blocked");const n=t=>{t.preventDefault(),this.logger.debug("[Cookie Blocker] Prevented script execution =>",e),e.removeEventListener("beforescriptexecute",n)};e.addEventListener("beforescriptexecute",n),null===(t=e.parentNode)||void 0===t||t.removeChild(e),this.backupScripts.push(e),this.logger.debug("[Cookie Blocker] Blocked script =>",e)}start(){this.mutationObserver.observe(document.documentElement,{subtree:!0,childList:!0}),this.patchCreateElement(),this.logger.debug("[ACTIVATED] Cookie Blocker Plugin")}reload(e){this.savedConsent=e||this.savedConsent,this.backupScripts=this.backupScripts.filter((e=>{const t=this.getScriptCookies(e),n=this.getScriptCategories(e),i=this.hasConsentForCookies(t),o=this.hasConsentForCategories(n);return!i||!o||(e.setAttribute("type","text/javascript"),document.body.appendChild(e),!1)}))}}},916:(e,t,n)=>{"use strict";n.d(t,{e:()=>r});var i=n(502),o=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{a(i.next(e))}catch(e){r(e)}}function l(e){try{a(i.throw(e))}catch(e){r(e)}}function a(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,l)}a((i=i.apply(e,t||[])).next())}))};class r{constructor(e){this.API_BASE_URL="https://riza.efilli.com",this.key=e}fetchRemoteConfig(){return o(this,void 0,void 0,(function*(){const e=`${this.API_BASE_URL}/v1/banner?accessKey=${this.key}`,t=new Request(e);return yield this.request(t)}))}sendConsentPayload(e){return o(this,void 0,void 0,(function*(){const t={browserData:(0,i.yh)(),popup:{settingsTab:{cookies:e.cookies.map((e=>{const t=window.efilli.cookies.find((t=>t.name==e.name));return Object.assign(Object.assign({},t),e)}))}}},n=`${this.API_BASE_URL}/v1/log?accessKey=${this.key}`,o={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)},r=new Request(n,o);return yield this.request(r)}))}sendErrorLog(e,t,n){return o(this,void 0,void 0,(function*(){const o=(0,i.yh)(),r={message:e,stack:t,url:n,browserData:o},s=`${this.API_BASE_URL}/v1/error-log?accessKey=${this.key}`,l={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)},a=new Request(s,l);return yield this.request(a)}))}request(e){var t;return o(this,void 0,void 0,(function*(){null===(t=null==e?void 0:e.headers)||void 0===t||t.set("X-Efilli-Host",(0,i.vm)());const n=fetch(e).then((e=>o(this,void 0,void 0,(function*(){if(!e.ok){const t=e.status,n=yield e.text(),i=e.url,o=new Error("Fetch failed");throw o.stack=`Request url: ${i}\nStatus code: ${t}\n\nResponse text: ${n}`,o}return yield e.json()})))),[r,s]=yield(0,i.to)(n);return{err:r,res:s}}))}}},932:(e,t,n)=>{"use strict";n.d(t,{Y:()=>i});class i{constructor(e,t){this.debugging=e,this.httpClient=t}error(e,t){var n,i;console.error(`EFL_ERROR: ${e}`,t||"");let o="";const r=null===(n=null===window||void 0===window?void 0:window.location)||void 0===n?void 0:n.href;"string"==typeof t?o=t:t instanceof Error?o=(null==t?void 0:t.stack)||(null==t?void 0:t.message)||(null==t?void 0:t.name)||(null===(i=null==t?void 0:t.toString)||void 0===i?void 0:i.call(t)):"object"==typeof t&&(o=JSON.stringify(t));try{this.httpClient.sendErrorLog(e,o,r)}catch(e){console.error("EFL_ERROR: Error while sending error log",e)}}warn(e,t){console.warn(`EFL_WARNING: ${e}`,t||"")}debug(e,t){this.debugging&&console.log(`EFL_DEBUG: ${e}`,t||"")}}},502:(e,t,n)=>{"use strict";function i(e){return e.then((e=>[null,e])).catch((e=>[e,void 0]))}function o(){var e,t,n,i,o,s,l,a;const c=null===(t=null===(e=null===performance||void 0===performance?void 0:performance.getEntriesByType)||void 0===e?void 0:e.call(performance,"navigation"))||void 0===t?void 0:t[0];return{userAgent:null===(n=null===window||void 0===window?void 0:window.navigator)||void 0===n?void 0:n.userAgent,pageLoad:null==c?void 0:c.duration,language:null===(i=null===window||void 0===window?void 0:window.navigator)||void 0===i?void 0:i.language,networkType:(null===(s=null===(o=null===window||void 0===window?void 0:window.navigator)||void 0===o?void 0:o.connection)||void 0===s?void 0:s.effectiveType)||"",screen:{devicePixelRatio:null===window||void 0===window?void 0:window.devicePixelRatio,height:null===(l=null===window||void 0===window?void 0:window.screen)||void 0===l?void 0:l.height,width:null===(a=null===window||void 0===window?void 0:window.screen)||void 0===a?void 0:a.width},uuid:r()}}function r(){return localStorage.getItem("efl-uuid")||function(){const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}));return localStorage.setItem("efl-uuid",e),e}()}function s(e){return e&&"object"==typeof e&&!Array.isArray(e)}function l(e,...t){if(!t.length)return e;const n=t.shift();if(s(e)&&s(n))for(const t in n)s(n[t])?(e[t]||Object.assign(e,{[t]:{}}),l(e[t],n[t])):Object.assign(e,{[t]:n[t]});return l(e,...t)}function a(){var e;const t=new URLSearchParams(location.search).get("efl-host")||"";if(t)return t;return((null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.host)||"").split(":")[0]}n.d(t,{to:()=>i,yh:()=>o,Ee:()=>l,vm:()=>a})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Efilli:()=>Efilli});var eventemitter2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(387),eventemitter2__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(eventemitter2__WEBPACK_IMPORTED_MODULE_0__),_http_client__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(916),_cookie_blocker__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(677),_logger__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(932),_vue_reactivity__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(293),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(502),__awaiter=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{a(i.next(e))}catch(e){r(e)}}function l(e){try{a(i.throw(e))}catch(e){r(e)}}function a(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,l)}a((i=i.apply(e,t||[])).next())}))},_a,_b;class Efilli extends eventemitter2__WEBPACK_IMPORTED_MODULE_0__.EventEmitter2{constructor(e){var t,n;super({maxListeners:0}),this.__gtm={setDefaultConsentState:void 0,updateConsentState:void 0,googleConsentMode:!1},this.options=e,this.__httpClient=new _http_client__WEBPACK_IMPORTED_MODULE_1__.e(e.key),this.__logger=new _logger__WEBPACK_IMPORTED_MODULE_2__.Y(e.debugging,this.__httpClient),this.__cookieBlocker=new _cookie_blocker__WEBPACK_IMPORTED_MODULE_3__.z(this.__logger,this.__getSavedConsent()),this.__definedEvents=["efilli.core.ready","efilli.core.domReady","efilli.core.consentSaved","efilli.core.consentCleared","efilli.core.editConsent","efilli.core.layoutElementAdded","efilli.core.componentAdded","efilli.core.componentRemoved","efilli.core.removedAllLayoutElements"],this.__definedLayouts=[],this.__definedComponents=[],this.__remoteConfig=null,this.__isReady=!1,this.__defaultLayoutsURL="https://cdn.efilli.com/layouts/efilli.layouts.js",this.__selectedCountryCode=null,this.__selectedCountry=null;(null===(n=null===(t=this.options)||void 0===t?void 0:t.plugins)||void 0===n?void 0:n.includes("cookie-blocker"))&&this.__cookieBlocker.start(),this.__init()}static create(e={}){const t=(0,_utils__WEBPACK_IMPORTED_MODULE_4__.Ee)({key:"",plugins:[],autoLoadLayouts:!0,customLayoutsURL:"",layout:"efilli-layout-legacy",components:["efilli-component-banner","efilli-component-popup"],debugging:!1,preview:!1,previewConfig:null,customOptions:{},layoutNameOverride:""},e),n=(0,_vue_reactivity__WEBPACK_IMPORTED_MODULE_5__.qj)(new Efilli(t));return window&&(window.efilli=n),n}__init(){return __awaiter(this,void 0,void 0,(function*(){if(!document.body)return this.__logger.debug("Document body object not ready.. will be tried again after 100ms"),void setTimeout(this.__init.bind(this),100);this.options.debugging&&this.onAny((e=>this.__logger.debug("Event emitted from efilli :",e))),this.__logger.debug("Initializing Efilli...");const e=!!this.options.preview&&!!this.options.previewConfig;if(e)this.__setRemoteConfig(this.options.previewConfig),this.__logger.debug("Loded remote config by manually");else{const{err:e,res:t}=yield this.__httpClient.fetchRemoteConfig();if(this.__logger.debug("Fetched remote config from api"),e)return this.__logger.error("Failed to fetch remote config",e);this.__setRemoteConfig(t)}this.setCountry(this.__remoteConfig.ipCountry);const t=this.__isOutdatedSavedConsent();(e||t)&&this.clearConsent(),this.__executeCustomJsCode(this.__remoteConfig.customScriptCode);const n=this.__getSavedConsent();n&&(this.__emitConsentEventOverDocument(),this.__notifyGTM(),n.cookies.forEach((e=>{this.setCookieConsent(e.name,e.status)}))),this.__emitReadyEvent(),this.options.autoLoadLayouts&&this.__loadLayouts()}))}__executeCustomJsCode(jsCode){try{eval(jsCode),this.__logger.debug("Executed custom javascript code"),this.emit("efilli.core.customJsCodeExecuted")}catch(e){this.__logger.error("Failed to execute custom code",e)}}__loadLayouts(){this.__logger.debug("Loading layouts..");const e=document.createElement("script");e.src=this.options.customLayoutsURL||this.__defaultLayoutsURL,e.classList.add("efilli-layouts-loader-script"),document.body.appendChild(e),this.__setLayout(this.options.layoutNameOverride||this.options.layout)}__setLayout(e){if(!e)return void this.__logger.error("__setLayout() : Layout key required");this.__removeExistsLayouts();const t=document.createElement(e);t.classList.add(e),setTimeout((()=>{document.body.appendChild(t),this.emit("efilli.core.layoutElementAdded")}),10)}__addComponent(e){var t;e||(null==e?void 0:e.length)?(null===(t=this.options.components)||void 0===t||t.push(e),this.emit("efilli.core.componentAdded")):this.__logger.error("__addComponent() : Component key required")}__removeComponent(e){var t;e||(null==e?void 0:e.length)?(this.options.components=(null===(t=this.options.components)||void 0===t?void 0:t.filter((t=>t!=e)))||[],this.emit("efilli.core.componentRemoved")):this.__logger.error("__removeComponent() : Component key required")}__removeExistsLayouts(){document.querySelectorAll('[class^="efilli-layout"]').forEach((e=>{var t;return null===(t=null==e?void 0:e.parentNode)||void 0===t?void 0:t.removeChild(e)})),this.__logger.debug("All layouts removed"),this.emit("efilli.core.removedAllLayoutElements")}__defineEvent(e){this.definedEvents.includes(e)||this.__definedEvents.push(e),this.__definedEvents=this.__definedEvents.sort()}__defineLayout(e){this.definedLayouts.includes(e)||this.__definedLayouts.push(e),this.__definedLayouts=this.__definedLayouts.sort()}__defineComponent(e){this.definedComponents.includes(e)||this.__definedComponents.push(e),this.__definedComponents=this.__definedComponents.sort()}__getSavedConsent(){let e=null;try{e=JSON.parse(localStorage.getItem("efl-consent"))}catch(e){this.__logger.warn("Failed to parse saved consent")}return e}__isOutdatedSavedConsent(){var e;return!!this.__remoteConfig&&(null===(e=this.savedConsent)||void 0===e?void 0:e.updatedDate)<this.__remoteConfig.updatedDate}__emitConsentEventOverDocument(){const e=new CustomEvent("efl--consents",{detail:{cookies:this.savedConsent.cookies}});document.dispatchEvent(e)}__notifyGTM(){var e,t,n,i;if(null===(e=this.options.customOptions)||void 0===e?void 0:e.disableGTM)return this.__logger.debug("GTM integration is disabled");const o=window.dataLayer||[],r=(null===(t=this.savedConsent)||void 0===t?void 0:t.cookies)||[],s=r.filter((e=>e.status)).map((e=>e.name)).sort().join(",");o.push({event:s}),this.__logger.debug("GTM Event Sent:",s);const l=r.filter((e=>e.status)).map((e=>e.category)),a=[...new Set(l)];a.forEach((e=>{o.some((t=>t.event===e))||o.push({event:e})})),this.__logger.debug("GTM Event Sent:",a);const c=r.filter((e=>"essential"===e.category)),u=!!(null==c?void 0:c.length)&&c.every((e=>e.status)),d=r.filter((e=>"functional"===e.category)),_=!!(null==d?void 0:d.length)&&d.every((e=>e.status)),h=r.filter((e=>"marketing"===e.category)),f=!!(null==h?void 0:h.length)&&h.every((e=>e.status)),p=r.filter((e=>"other"===e.category)),v=!!(null==p?void 0:p.length)&&p.every((e=>e.status)),g={efilli_essential:u?"granted":"denied",efilli_functional:_?"granted":"denied",efilli_marketing:f?"granted":"denied",efilli_other:v?"granted":"denied"};this.__gtm.googleConsentMode&&Object.assign(g,{ad_storage:f?"granted":"denied",analytics_storage:f?"granted":"denied",functionality_storage:_?"granted":"denied",personalization_storage:v?"granted":"denied",security_storage:v?"granted":"denied"}),null===(i=null===(n=this.__gtm)||void 0===n?void 0:n.updateConsentState)||void 0===i||i.call(n,g),localStorage.setItem("efl-gtm-consent-state",JSON.stringify(g));const y={essential:u,functional:_,marketing:f,other:v},m={};r.forEach((e=>{m[e.name]=e.status})),o.push({event:"efilli.consent",categories:y,cookies:m})}__emitReadyEvent(){const e="efilli.core.ready";this.__isReady=!0,this.emit(e);const t=new CustomEvent(e);document.dispatchEvent(t)}__setRemoteConfig(e){e.countries.forEach((e=>{e.popup.settingsTab.cookies.forEach((e=>{e.status=e.defaultStatus}))})),this.__remoteConfig=e}get definedEvents(){return this.__definedEvents}get definedLayouts(){return this.__definedLayouts}get definedComponents(){return this.__definedComponents}get isReady(){return this.__isReady}get savedConsent(){return this.__getSavedConsent()}get blockedScripts(){return this.__cookieBlocker.backupScripts}get categories(){const e=this.cookies.map((e=>e.category)),t=this.allCategories.filter((t=>e.includes(t.key)));return t.forEach((e=>{const t=this.cookies.filter((t=>t.category==e.key)).every((e=>e.status));e.status=t})),t}get allCategories(){return this.__selectedCountry.popup.settingsTab.categories}get cookies(){return this.__selectedCountry.popup.settingsTab.cookies}get countries(){return this.__remoteConfig.countries.map((e=>({codes:e.codes,title:e.title})))}get banner(){return this.__selectedCountry.banner}get popup(){return this.__selectedCountry.popup}get tabs(){return this.__selectedCountry.popup.tabs}get customStyles(){return this.__remoteConfig.theme}get rawConfig(){return this.__remoteConfig}get selectedCountry(){return this.__selectedCountry}get selectedCountryCode(){return this.__selectedCountryCode}setDebugging(e=!1){this.options.debugging=!!e,this.__logger.debugging=this.options.debugging}saveConsent(){try{const e=this.cookies.map((e=>({name:e.name,status:e.status,category:e.category}))),t={updatedDate:Date.now(),cookies:e};this.options.preview?this.__logger.debug("[PREVIEW MODE ACTIVE] Skipping send to api & save to local"):(this.__httpClient.sendConsentPayload(t),this.__logger.debug("Sent consent to api"),localStorage.setItem("efl-consent",JSON.stringify(t)),this.__logger.debug("Saved consent to local storage"),this.__cookieBlocker.reload(t)),this.emit("efilli.core.consentSaved"),this.__emitConsentEventOverDocument(),this.__notifyGTM()}catch(e){this.__logger.error("Failed to save consent",e)}}editConsent(){this.emit("efilli.core.editConsent")}clearConsent(){localStorage.removeItem("efl-consent"),localStorage.removeItem("efl-gtm-consent-state"),this.__logger.debug("Cleared saved consent"),this.emit("efilli.core.consentCleared")}setCountry(e){const t=this.__remoteConfig.countries.find((e=>e.isDefault)).codes[0],n=e||this.__remoteConfig.ipCountry,i=this.__remoteConfig.countries.some((e=>e.codes.includes(n)));this.__selectedCountryCode=i?n:t,this.__selectedCountry=this.__remoteConfig.countries.find((e=>e.codes.includes(this.__selectedCountryCode))),this.emit("efilli.core.countryChanged")}setCookieConsent(e,t){const n=this.__selectedCountry.popup.settingsTab.cookies.find((t=>t.name==e));this.__remoteConfig.countries.forEach((n=>{n.popup.settingsTab.cookies.forEach((n=>{n.name==e&&(n.status=!!t)}))})),n&&(n.status=!!t,this.emit("efilli.core.cookieConsentStatusUpdated"))}reload(){this.removeAllListeners(),this.__init()}destroy(){this.__logger.debug("All components & efilli instance destroyed"),this.__removeExistsLayouts(),this.removeAllListeners(),delete window.efilli}acceptAll(e={saveConsent:!0}){this.cookies.forEach((e=>{this.setCookieConsent(e.name,!0)})),e.saveConsent&&this.saveConsent(),this.__logger.debug("efilli.acceptAll() : All cookies accepted")}rejectAll(e={saveConsent:!0}){this.cookies.forEach((e=>{this.setCookieConsent(e.name,"essential"==e.category)})),e.saveConsent&&this.saveConsent(),this.__logger.debug("efilli.rejectALL() : All cookies except essentials are rejected")}acceptAllByCategory(e,t={saveConsent:!0}){this.cookies.forEach((t=>{(e==t.category||e.includes(t.category))&&this.setCookieConsent(t.name,!0)})),t.saveConsent&&this.saveConsent(),this.__logger.debug(`efilli.acceptAllByCategories() : All cookies in [${e.toString()}] accepted`)}setGtmSetDefaultConsentStateFn(e,t=!1){this.__gtm.googleConsentMode=!!t,this.__gtm.setDefaultConsentState=e}setGtmUpdateConsentStateFn(e,t=!1){this.__gtm.googleConsentMode=!!t,this.__gtm.updateConsentState=e}}const eflScript=document.currentScript,queryParams=new URLSearchParams(location.search),scriptSrcURL=new URL(eflScript.src),scriptQueryParams=new URLSearchParams(scriptSrcURL.search),key=queryParams.get("efl-key")||eflScript.dataset.key||scriptQueryParams.get("key")||"",plugins=(null===(_a=eflScript.dataset.plugins)||void 0===_a?void 0:_a.split(",").map((e=>e.trim())))||[],mode=eflScript.dataset.mode||queryParams.get("efl-mode")||"auto",debugging=queryParams.has("efl-debug")||!!(null===(_b=eflScript.dataset)||void 0===_b?void 0:_b.debug)||!1,layoutKey=queryParams.get("efl-layout")||"efilli-layout-legacy";if(window.EFILLI_GLOBAL_OPTIONS=window.EFILLI_GLOBAL_OPTIONS||{key,plugins,mode,debugging,layout:layoutKey,autoLoadLayouts:!0,preview:!1,previewConfig:null,customOptions:{},customLayoutsURL:""},window.createEfilli=(e={})=>{const t=window.EFILLI_GLOBAL_OPTIONS,n=(0,_utils__WEBPACK_IMPORTED_MODULE_4__.Ee)(t,e);return Efilli.create(n)},"manual"!=mode){window.createEfilli();const e=queryParams.has("efl-reset")||queryParams.has("efl--reset");e&&window.efilli.once("efilli.core.ready",(()=>{var e;return null===(e=window.efilli)||void 0===e?void 0:e.clearConsent()}));const t=queryParams.has("efl-edit")||queryParams.has("efl--edit");t&&window.efilli.once("efilli.core.ready",(()=>setTimeout((()=>window.efilli.editConsent()),1e3)))}})(),window.efl=__webpack_exports__})();